# 文と式
- JavaScriptは、文(Statement)と式(Expression)から構成されてる

## 式
- 値を生成し、変数に代入できるもの
- 42のようなリテラルやfooといった変数、関数呼び出し
- `1 + 1`のような式と演算子の組み合わせ
- 評価した結果を変数に代入できるものは式であるという理解で問題ない
> 式を評価すると結果の値を得ることができ、**評価値**と呼ぶ
```JavaScript
// 1という式の評価値を表示
console.log(1); // => 1
// 1 + 1という式の評価値を表示
console.log(1 + 1); // => 2
// 式の評価値を変数に代入
const total = 1 + 1;
// 関数式の評価値(関数オブジェクト)を変数に代入
const fn = function() {
  return 1;
};
// fn() という式の評価値を表示
console.log(fn()); // => 1
```

## 文
- 処理する1ステップが1つの文
- JavaScriptでは、文の末尾にセミコロン(;)を置くことで文と文に区切りをつける
- ソースコードとして書かれた文を上から処理していくことで、プログラムが実行される
  - if文
  - for文
  ```JavaScript
  const isTrue = true;
  // isTrueという式がif文の中に出てくる
  if (isTrue) {
  }
  ```
- if文などは文であり式にはなれないため、if文を変数へ代入することはできず、構文エラー(SyntaxError)になる
```JavaScript
// 構文として間違っているため、SyntaxErrorが発生する
var forIsNotExpression = if (true) { /* ifは文であるため式にはなれない */ }
```

## 式文
- 式(Expression)は文(Statement)になることができ、文となった式のことを式文と呼ぶ
- 基本的に文が書ける場所には式を書くことができる
- 式文(Expression statement)は文の一種であるため、セミコロンで文を区切る
```JavaScript
// 式文であるためセミコロンをつけている
式;
```
> 式は文になることができるが、文は式になれない

## ブロック文
文を`{`と`}`で囲んだ部分をブロックと言い、複数の文を書くことができる
```JavaScript
{
  文;
  文;
}
```
- ブロック文は単独でも書けますが、基本的にはif文やfor文など他の構文と組み合わせて書く
```JavaScript
// if文とブロック文の組み合わせ
if (true) {
  console.log("文1");
  console.log("文2");
}
```
- ブロックで終わる文の末尾には、セミコロンが不要となっている
```JavaScript
// ブロックで終わらない文なので、セミコロンが必要
if (true) console.log(true);
// ブロックで終わる文なので、セミコロンが不要
if (true) {
  console.log(true);
}
```

## 単独のブロック文の活用
- REPLで同じコードの一部を変更して実行を繰り返している場合には、単独のブロック文が役に立つ機会がある
- REPLでは、同じ変数名を再定義すると、構文エラーが発生する
```JavaScript
» const count = 1;
undefined
» const count = 2;
SyntaxError: redeclaration of const count
```
- この問題は単独のブロック文で変数定義を囲むことで回避できる
- ブロック文({})の中でletやconstを用いて変数を定義しても、そのブロック文の外には影響しない
```JavaScript
» {
  const count = 1;
}
undefined // ここでブロック内で定義した変数`count`は参照できなくなる
» {
  const count = 1;
}
undefined // ここでブロック内で定義した変数`count`は参照できなくなる
```
> **ブロックスコープ**という仕組みによるもの

## function宣言(文)とfunction式
- functionキーワードから文を開始する関数宣言と、変数へ関数式を代入する方法がある
- 関数宣言(文)と関数式は、どちらもfunctionというキーワードを利用する
```JavaScript
// learn関数を宣言する関数宣言文
function learn() {
}
// 関数式をread変数へ代入
const read = function() {
};
```
- ブロックで終わる文にはセミコロンが不要であるため、関数宣言(文)で定義したlearn関数には、セミコロンがない
- 関数式をread変数へ代入したものには、セミコロンがある
  - 匿名関数は式であり、この処理は変数を宣言する文の一部であるため、末尾にセミコロンが必要となる
  ```JavaScript
  function fn() {}
  // fn(式)の評価値を代入する変数宣言の文
  const read = fn;
  ```

## まとめ
- JavaScriptは文(Statement)と式(Expression)から構成される
- 文は式になれない
- 式は文になれる(式文)
- 文の末尾にはセミコロンをつける
- ブロックで終わる文は例外的にセミコロンをつけなくてよい
- JavaScriptには、特殊なルールに基づき、セミコロンがない文も行末に自動でセミコロンが挿入されるという仕組みがある
  - この仕組みは構文を正しく解析できない場合に、セミコロンを足すという挙動を持っており、意図しない挙動を生むことがあるため、必ず文の末尾にはセミコロンを書く
  - エディターやIDEの中にはセミコロンの入力の補助をしてくれるものや、ESLintなどのLintツールを使うことで、 セミコロンが必要なのかをチェックすることができる